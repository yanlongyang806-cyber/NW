<html>
<head>
<title>Error Tracker</title>

<link href="/js/yui/build/button/assets/skins/sam/button.css" rel="stylesheet" type="text/css">
<link href="/js/yui/build/calendar/assets/skins/sam/calendar.css" rel="stylesheet" type="text/css">
<link href="/js/yui/build/container/assets/skins/sam/container.css" rel="stylesheet" type="text/css">

<script type="text/javascript" src="/js/dateFormat.js"></script>
<script type="text/javascript" src="/js/yui/build/yahoo-dom-event/yahoo-dom-event.js"></script>
<script type="text/javascript" src="/js/yui/build/element/element-min.js"></script>
<script type="text/javascript" src="/js/yui/build/container/container-min.js"></script>
<script type="text/javascript" src="/js/yui/build/menu/menu-min.js"></script>
<script type="text/javascript" src="/js/yui/build/button/button-min.js"></script>
<script type="text/javascript" src="/js/yui/build/calendar/calendar-min.js"></script>
<script type="text/javascript" src="/jquery.js"></script>	

<style type="text/css">
<!--

body {
	background-color: #003369;
}

#maintable {
	margin-left: 20px;
	margin-right: 20px;
	background-color: #ffffff;
}

.smallnote {
	font-size: 0.7em;
}

.smalllink {
	font-size: 0.7em;
	cursor: pointer;
}

.jirainfo {
	font-size: 0.8em;
}

.executablenames {
	font-size: 0.8em;
	width: 100%;
	text-align: left;
}

.summarytable {
	border: 1px solid #aaaaaa;
}

.summaryheadtd {
	font-weight: 900;
	text-align: right;
	border: 1px solid #aaaaaa;
	background-color: #eeeeee;
}

.summaryheadtdend {
	font-weight: 900;
	text-align: left;
	border: 1px solid #aaaaaa;
	background-color: #eeeeee;
}

/* -----------------------------------*/

.exacttable {
	border: 1px dashed black;
	background-color: #ffeeee;
}

/* Clear calendar's float, using dialog inbuilt form element */
#yui-container .bd form {
	clear:left;
}

/* Datefield look/feel */
.datefield {
	top:10px;
	left:10px;
	white-space:nowrap;
	padding:10px;
}

.datefieldcon {
	display: inline;
	position: relative;
}


.datefield input,
.datefield button,
.datefield label  {
	vertical-align:middle;
}

.datefield label  {
	font-weight:bold;
}

.datefield input  {
	width: 10em;
}

.datefield button  {
	padding:0 5px 0 5px;
	margin-left:2px;
}

.datefield button img {
	padding:0;
	margin:0;
	vertical-align:middle;
}


/* -----------------------------------*/

.summarytd {
	text-align: right;
	border: 1px solid #aaaaaa;
}

.summarytdend {
	text-align: left;
	border: 1px solid #aaaaaa;
}

.astsummarytd {
	text-align: right;
	border: 1px solid #aaaaaa;
	background-color: #ffffee;
}

.astsummarytdend {
	text-align: left;
	border: 1px solid #aaaaaa;
	background-color: #ffffee;
}

.cshsummarytd {
	text-align: right;
	border: 1px solid #aaaaaa;
	background-color: #ffeeee;
}

.cshsummarytdend {
	text-align: left;
	border: 1px solid #aaaaaa;
	background-color: #ffeeee;
}

.errsummarytd {
	text-align: right;
	border: 1px solid #aaaaaa;
	background-color: #eeffff;
}

.errsummarytdend {
	text-align: left;
	border: 1px solid #aaaaaa;
	background-color: #eeffff;
}

.cplsummarytd {
	text-align: right;
	border: 1px solid #aaaaaa;
	background-color: #ffeeff;
}

.cplsummarytdend {
	text-align: left;
	border: 1px solid #aaaaaa;
	background-color: #ffeeff;
}

.gmbgsummarytd {
	text-align: right;
	border: 1px solid #aaaaaa;
	background-color: #ccffff;
}
.gmbgsummarytdend {
	text-align: left;
	border: 1px solid #aaaaaa;
	background-color: #ccffff;
}

/* -----------------------------------*/

.summaryexpr {
	font-weight: 900;
	font-size: 0.7em;
	color: #555500;
}

.summaryerr {
	font-weight: 900;
	font-size: 0.7em;
	color: #aa0000;
}

.summarycallstack {
	font-weight: 900;
	font-size: 0.7em;
	color: #005555;
}

.summaryfile {
	font-weight: 900;
	font-size: 0.7em;
	color: #000000;
}

/* -----------------------------------*/

.title {
	color: #000000;
	font-size: 1.2em;
	font-weight: 900;
}

a {
	text-decoration: none;
	color: #773333;
}

.heading {
	font-size: 0.8em;
	font-weight: 900;
	margin-top: 15px;
	margin-bottom: 5px;
}

.entry {
}

.versionrange {
}

.count {
}

.callstack {
	border: 1px dashed black;
	padding: 5px;
}

.fileline {
}

.ppExecutableNames {
}

.ppUserNames {
}

.ppDayCounts {
}

.dumps {
}

.tr_dumpfull {
	background-color: #00cc00;
}
.tr_dumpmini {
	background-color: #eeee00;
}
.tr_dumpnone {
	background-color: #dd0000;
}

.tr_dumpfull a,.tr_dumpmini a,.tr_dumpnone a {
	text-decoration: none;
	color: #0000dd;
}

.tableheading {
	font-weight: 900;
	font-size: 0.8em;
}

.callstackblamename {
	font-size: 0.8em;
	color: #aa0000;
}

.callstackblametime {
	font-size: 0.8em;
	color: #aa0000;
}

.warning {
	font-weight: bold;
	color: #aa0000;
}
.bold {
	font-weight: bold;
}

.summaryinfo {
	font-size: 0.8em;
	color: #666666;
	padding-left: 20px;
}

#infoheading {
	padding-left: 20px;
}

.hint {
	font-size: 0.6em;
}

.formdata {
	font-size: 0.8em;
}

.pFullError {
	font-size: 0.8em;
	font-family: Courier New;
	white-space: pre;
	border: 1px dashed #000000;
	padding: 5px;
}

.callstackmodule {
	font-family: Courier New;
	font-size: 0.7em;
	margin-right: 10px;
	text-align: left;
	color: #336900;
}

.callstackfunc {
	font-family: Courier New;
	font-weight: 900;
	color: #003369;
}

.callstackfile {
	font-family: Courier New;
	font-size: 0.7em;
	color: #333333;
}

.callstackline {
	font-family: Courier New;
	font-size: 0.7em;
	color: #777777;
}

-->
</style>

<script type="text/javascript">
function makeCalendarPicker(btn,callback){


    var Event = YAHOO.util.Event,
        Dom = YAHOO.util.Dom,
        dialog,
        calendar;

    var showBtn = Dom.get(btn);
    Event.on(showBtn, "click", function() {

        // Lazy Dialog Creation - Wait to create the Dialog, and setup document click listeners, until the first time the button is clicked.
        if (!dialog) {

            // Hide Calendar if we click anywhere in the document other than the calendar
            Event.on(document, "click", function(e) {
                var el = Event.getTarget(e);
                var dialogEl = dialog.element;
                if (el != dialogEl && !Dom.isAncestor(dialogEl, el) && el != showBtn && !Dom.isAncestor(showBtn, el)) {
                    dialog.hide();
                }
            });

            function resetHandler() {
                // Reset the current calendar page to the select date, or 
                // to today if nothing is selected.
                var selDates = calendar.getSelectedDates();
                var resetDate;
    
                if (selDates.length > 0) {
                    resetDate = selDates[0];
                } else {
                    resetDate = calendar.today;
                }
    
                calendar.cfg.setProperty("pagedate", resetDate);
                calendar.render();
                if (typeof callback == "function") callback(null);
            }
    
            function closeHandler() {
                dialog.hide();
            }

            dialog = new YAHOO.widget.Dialog("yui-container", {
                visible:false,
                context:["show", "tl", "bl"],
                buttons:[ {text:"Reset", handler: resetHandler, isDefault:true}, {text:"Close", handler: closeHandler}],
                draggable:false,
                close:false
            });
            dialog.setHeader('Pick A Date');
            dialog.setBody('<div id="cal"></div>');
            dialog.render(showBtn.parentNode);

            dialog.showEvent.subscribe(function() {
                if (YAHOO.env.ua.ie) {
                    // Since we're hiding the table using yui-overlay-hidden, we 
                    // want to let the dialog know that the content size has changed, when
                    // shown
                    dialog.fireEvent("changeContent");
                }
            });
        }

        // Lazy Calendar Creation - Wait to create the Calendar until the first time the button is clicked.
        if (!calendar) {

            calendar = new YAHOO.widget.Calendar("cal", {
                iframe:false,          // Turn iframe off, since container has iframe support.
                hide_blank_weeks:true  // Enable, to demonstrate how we handle changing height, using changeContent
            });
            calendar.render();

            calendar.selectEvent.subscribe(function() {
                if (calendar.getSelectedDates().length > 0) {
                    var selDate = calendar.getSelectedDates()[0];
                    if (typeof callback == "function") callback(selDate);
                } else {
                    if (typeof callback == "function") callback(null);
                }
                dialog.hide();
            });

            calendar.renderEvent.subscribe(function() {
                // Tell Dialog it's contents have changed, which allows 
                // container to redraw the underlay (for IE6/Safari2)
                dialog.fireEvent("changeContent");
            });
        }

        var seldate = calendar.getSelectedDates();

        if (seldate.length > 0) {
            // Set the pagedate to show the selected date if it exists
            calendar.cfg.setProperty("pagedate", seldate[0]);
            calendar.render();
        }

        dialog.show();
    });

}

function convertToSeconds2k(ms) {
    var gmt = new Date(ms);
    var lsm = new Date;
    var lso = new Date;
    lsm.setMonth(2); // March
    lsm.setDate(31);
    var day = lsm.getDay();// day of week of 31st
    lsm.setDate(31-day); // last Sunday
    lso.setMonth(9); // October
    lso.setDate(31);
    day = lso.getDay();
    lso.setDate(31-day);
    if (gmt < lsm || gmt >= lso) dst = 1;

    seconds = gmt.getTime()/1000 - new Date("2000/01/01").getTime()/1000 + gmt.getTimezoneOffset()*60;
    if (dst) seconds += 3600;
    
    return seconds;
}

function recalcRaw(inputfield, rawfield)
{
	ms = Date.parse(""+document.getElementById(inputfield).value);
	YAHOO.util.Dom.get(rawfield).value = convertToSeconds2k(ms);
}

function searchfixup()
{
	recalcRaw("datestart", "datestartraw");
	recalcRaw("dateend", "dateendraw");
}

function createCal(btn, inputfield, rawfield)
{
	makeCalendarPicker(btn, function(oDate) {
		if (oDate) {
			ms = Date.parse(""+document.getElementById(inputfield).value);
			if (!ms) ms = Date.parse("2000/01/01 "+ document.getElementById(inputfield).value);
			if (ms) {
				oldDate = new Date(ms);
				oDate.setHours(oldDate.getHours());
				oDate.setMinutes(oldDate.getMinutes());
				oDate.setSeconds(oldDate.getSeconds());
			}
			document.getElementById(inputfield).value = dateFormat(oDate, "yyyy/mm/dd HH:MM:ss");
			recalcRaw(inputfield, rawfield);
		} else document.getElementById(inputfield).value = "";
	});
}

function setTimeWindow(numHours)
{
    var t1 = new Date;
    var t2 = new Date;
    t2.setTime(t1.getTime() - (numHours * 60 * 60 * 1000));
    document.getElementById('datestart').value = dateFormat(t2, "yyyy-mm-dd HH:MM:ss");
    document.getElementById('dateend').value   = dateFormat(t1, "yyyy-mm-dd HH:MM:ss");
}

</script>

